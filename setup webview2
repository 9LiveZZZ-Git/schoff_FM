#!/bin/bash
#===============================================================================

# JUCE WebView2 Project Setup Script

# For schoff_FM and similar JUCE audio plugin projects

# 

# This script:

# 1. Downloads and extracts Microsoft WebView2 SDK via NuGet

# 2. Creates the CMakeLists.txt for modern JUCE 8 WebView2 builds

# 3. Sets up the project directory structure

# 4. Generates a sample modern HTML faceplate

# 

# Usage:

# chmod +x setup_webview2.sh

# ./setup_webview2.sh [project_name] [project_path]

# 

# Example:

# ./setup_webview2.sh schoff_FM ~/projects/schoff_FM

#===============================================================================

set -e

# Colors for output

RED=’\033[0;31m’
GREEN=’\033[0;32m’
YELLOW=’\033[1;33m’
BLUE=’\033[0;34m’
NC=’\033[0m’ # No Color

# Configuration

PROJECT_NAME=”${1:-schoff_FM}”
PROJECT_PATH=”${2:-$(pwd)/${PROJECT_NAME}}”
WEBVIEW2_VERSION=“1.0.2535.41”  # Update as needed
JUCE_VERSION=“8.0.0”

echo -e “${BLUE}================================================${NC}”
echo -e “${BLUE}JUCE WebView2 Project Setup${NC}”
echo -e “${BLUE}================================================${NC}”
echo “”
echo -e “Project Name: ${GREEN}${PROJECT_NAME}${NC}”
echo -e “Project Path: ${GREEN}${PROJECT_PATH}${NC}”
echo -e “WebView2 SDK: ${GREEN}${WEBVIEW2_VERSION}${NC}”
echo -e “JUCE Version: ${GREEN}${JUCE_VERSION}${NC}”
echo “”

#===============================================================================

# Step 1: Create Directory Structure

#===============================================================================
echo -e “${YELLOW}[1/5] Creating directory structure…${NC}”

mkdir -p “${PROJECT_PATH}”
cd “${PROJECT_PATH}”

mkdir -p Source
mkdir -p Resources
mkdir -p Builds
mkdir -p ThirdParty/WebView2

echo -e “${GREEN}✓ Directory structure created${NC}”

#===============================================================================

# Step 2: Download WebView2 SDK

#===============================================================================
echo -e “${YELLOW}[2/5] Downloading WebView2 SDK…${NC}”

WEBVIEW2_URL=“https://www.nuget.org/api/v2/package/Microsoft.Web.WebView2/${WEBVIEW2_VERSION}”
WEBVIEW2_ZIP=“ThirdParty/webview2.zip”

if [ ! -f “ThirdParty/WebView2/build/native/include/WebView2.h” ]; then
echo “Downloading WebView2 SDK ${WEBVIEW2_VERSION}…”

```
# Try curl first, then wget
if command -v curl &> /dev/null; then
    curl -L -o "${WEBVIEW2_ZIP}" "${WEBVIEW2_URL}"
elif command -v wget &> /dev/null; then
    wget -O "${WEBVIEW2_ZIP}" "${WEBVIEW2_URL}"
else
    echo -e "${RED}Error: Neither curl nor wget found. Please install one.${NC}"
    exit 1
fi

# Extract
unzip -o "${WEBVIEW2_ZIP}" -d "ThirdParty/WebView2"
rm "${WEBVIEW2_ZIP}"

echo -e "${GREEN}✓ WebView2 SDK downloaded and extracted${NC}"
```

else
echo -e “${GREEN}✓ WebView2 SDK already present${NC}”
fi

#===============================================================================

# Step 3: Create CMakeLists.txt

#===============================================================================
echo -e “${YELLOW}[3/5] Creating CMakeLists.txt…${NC}”

cat > CMakeLists.txt << ‘CMAKEOF’
#===============================================================================

# JUCE 8 WebView2 Plugin - CMake Configuration

# Generated by setup_webview2.sh

#===============================================================================
cmake_minimum_required(VERSION 3.22)

# Project info - UPDATE THESE

set(PROJECT_NAME “schoff_FM” CACHE STRING “Plugin name”)
set(COMPANY_NAME “9LiveZZZ” CACHE STRING “Company/Developer name”)
set(PLUGIN_CODE “Schf” CACHE STRING “4-char plugin code”)
set(MANUFACTURER_CODE “9Lvz” CACHE STRING “4-char manufacturer code”)

project(${PROJECT_NAME} VERSION 1.0.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

#—————————————————————————––

# Fetch JUCE from GitHub

#—————————————————————————––
include(FetchContent)

FetchContent_Declare(
JUCE
GIT_REPOSITORY https://github.com/juce-framework/JUCE.git
GIT_TAG        8.0.0
GIT_SHALLOW    TRUE
)

set(JUCE_BUILD_EXTRAS OFF CACHE BOOL “” FORCE)
set(JUCE_BUILD_EXAMPLES OFF CACHE BOOL “” FORCE)

FetchContent_MakeAvailable(JUCE)

#—————————————————————————––

# WebView2 SDK Path (downloaded by setup script)

#—————————————————————————––
set(WEBVIEW2_SDK_PATH “${CMAKE_CURRENT_SOURCE_DIR}/ThirdParty/WebView2” CACHE PATH “WebView2 SDK path”)

if(WIN32)
if(NOT EXISTS “${WEBVIEW2_SDK_PATH}/build/native/include/WebView2.h”)
message(WARNING “WebView2 SDK not found at ${WEBVIEW2_SDK_PATH}. Run setup_webview2.sh first.”)
endif()
endif()

#—————————————————————————––

# Create the Audio Plugin

#—————————————————————————––
juce_add_plugin(${PROJECT_NAME}
COMPANY_NAME “${COMPANY_NAME}”
IS_SYNTH TRUE
NEEDS_MIDI_INPUT TRUE
NEEDS_MIDI_OUTPUT FALSE
IS_MIDI_EFFECT FALSE
EDITOR_WANTS_KEYBOARD_FOCUS TRUE
PLUGIN_MANUFACTURER_CODE ${MANUFACTURER_CODE}
PLUGIN_CODE ${PLUGIN_CODE}
FORMATS VST3 Standalone AU
PRODUCT_NAME “${PROJECT_NAME}”

```
# CRITICAL: Enable WebView2 support
NEEDS_WEBVIEW2 TRUE
```

)

#—————————————————————————––

# Source Files

#—————————————————————————––
target_sources(${PROJECT_NAME}
PRIVATE
Source/PluginProcessor.cpp
Source/PluginProcessor.h
Source/PluginEditor.cpp
Source/PluginEditor.h
)

#—————————————————————————––

# Preprocessor Definitions

#—————————————————————————––
target_compile_definitions(${PROJECT_NAME}
PUBLIC
# Plugin settings
JUCE_WEB_BROWSER=1
JUCE_USE_WIN_WEBVIEW2=1      # Force WebView2, not IE!
JUCE_VST3_CAN_REPLACE_VST2=0
JUCE_DISPLAY_SPLASH_SCREEN=0

```
    # Audio settings
    JUCE_USE_CURL=0
    JUCE_USE_MP3AUDIOFORMAT=0
```

)

#—————————————————————————––

# Binary Resources (HTML Faceplate)

#—————————————————————————––
juce_add_binary_data(${PROJECT_NAME}_Data
HEADER_NAME “BinaryData.h”
NAMESPACE BinaryData
SOURCES
Resources/faceplate.html
Resources/style.css
Resources/app.js
)

#—————————————————————————––

# Link Libraries

#—————————————————————————––
target_link_libraries(${PROJECT_NAME}
PRIVATE
${PROJECT_NAME}_Data
juce::juce_audio_basics
juce::juce_audio_devices
juce::juce_audio_formats
juce::juce_audio_plugin_client
juce::juce_audio_processors
juce::juce_audio_utils
juce::juce_core
juce::juce_data_structures
juce::juce_events
juce::juce_graphics
juce::juce_gui_basics
juce::juce_gui_extra           # WebBrowserComponent lives here
PUBLIC
juce::juce_recommended_config_flags
juce::juce_recommended_lto_flags
juce::juce_recommended_warning_flags
)

#—————————————————————————––

# WebView2 Include/Link Paths (Windows only)

#—————————————————————————––
if(WIN32)
target_include_directories(${PROJECT_NAME}
PRIVATE
“${WEBVIEW2_SDK_PATH}/build/native/include”
)

```
# Determine architecture
if(CMAKE_SIZEOF_VOID_P EQUAL 8)
    set(WEBVIEW2_ARCH "x64")
else()
    set(WEBVIEW2_ARCH "x86")
endif()

target_link_directories(${PROJECT_NAME}
    PRIVATE
        "${WEBVIEW2_SDK_PATH}/build/native/${WEBVIEW2_ARCH}"
)
```

endif()

#—————————————————————————––

# Build Info

#—————————————————————————––
message(STATUS “”)
message(STATUS “==========================================”)
message(STATUS “  ${PROJECT_NAME} Build Configuration”)
message(STATUS “==========================================”)
message(STATUS “  JUCE Version:     ${JUCE_VERSION}”)
message(STATUS “  WebView2 Backend: ENABLED”)
message(STATUS “  C++ Standard:     ${CMAKE_CXX_STANDARD}”)
message(STATUS “  Build Type:       ${CMAKE_BUILD_TYPE}”)
message(STATUS “==========================================”)
message(STATUS “”)
CMAKEOF

# Substitute actual project name

sed -i “s/schoff_FM/${PROJECT_NAME}/g” CMakeLists.txt 2>/dev/null ||   
sed -i ‘’ “s/schoff_FM/${PROJECT_NAME}/g” CMakeLists.txt

echo -e “${GREEN}✓ CMakeLists.txt created${NC}”

#===============================================================================

# Step 4: Create Source Files

#===============================================================================
echo -e “${YELLOW}[4/5] Creating source files…${NC}”

# PluginProcessor.h

cat > Source/PluginProcessor.h << ‘PROCHEADEREOF’
#pragma once
#include <JuceHeader.h>

class PluginProcessor : public juce::AudioProcessor
{
public:
PluginProcessor();
~PluginProcessor() override;

```
void prepareToPlay(double sampleRate, int samplesPerBlock) override;
void releaseResources() override;
void processBlock(juce::AudioBuffer<float>&, juce::MidiBuffer&) override;

juce::AudioProcessorEditor* createEditor() override;
bool hasEditor() const override { return true; }

const juce::String getName() const override { return JucePlugin_Name; }
bool acceptsMidi() const override { return true; }
bool producesMidi() const override { return false; }
double getTailLengthSeconds() const override { return 0.0; }

int getNumPrograms() override { return 1; }
int getCurrentProgram() override { return 0; }
void setCurrentProgram(int) override {}
const juce::String getProgramName(int) override { return {}; }
void changeProgramName(int, const juce::String&) override {}

void getStateInformation(juce::MemoryBlock& destData) override;
void setStateInformation(const void* data, int sizeInBytes) override;

juce::AudioProcessorValueTreeState& getAPVTS() { return apvts; }
```

private:
juce::AudioProcessorValueTreeState apvts;
juce::AudioProcessorValueTreeState::ParameterLayout createParameterLayout();

```
JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR(PluginProcessor)
```

};
PROCHEADEREOF

# PluginProcessor.cpp

cat > Source/PluginProcessor.cpp << ‘PROCCPPEOF’
#include “PluginProcessor.h”
#include “PluginEditor.h”

PluginProcessor::PluginProcessor()
: AudioProcessor(BusesProperties()
.withInput(“Input”, juce::AudioChannelSet::stereo(), true)
.withOutput(“Output”, juce::AudioChannelSet::stereo(), true)),
apvts(*this, nullptr, “Parameters”, createParameterLayout())
{
}

PluginProcessor::~PluginProcessor() {}

juce::AudioProcessorValueTreeState::ParameterLayout PluginProcessor::createParameterLayout()
{
std::vector<std::unique_ptr<juce::RangedAudioParameter>> params;

```
// FM Synth Parameters - customize for your Faust DSP
params.push_back(std::make_unique<juce::AudioParameterFloat>(
    "carrier_freq", "Carrier Frequency",
    juce::NormalisableRange<float>(20.0f, 2000.0f, 0.1f, 0.3f), 440.0f));

params.push_back(std::make_unique<juce::AudioParameterFloat>(
    "mod_index", "Modulation Index",
    juce::NormalisableRange<float>(0.0f, 20.0f, 0.01f), 1.0f));

params.push_back(std::make_unique<juce::AudioParameterFloat>(
    "mod_ratio", "Modulation Ratio",
    juce::NormalisableRange<float>(0.1f, 10.0f, 0.01f), 1.0f));

params.push_back(std::make_unique<juce::AudioParameterFloat>(
    "attack", "Attack",
    juce::NormalisableRange<float>(0.001f, 2.0f, 0.001f, 0.3f), 0.01f));

params.push_back(std::make_unique<juce::AudioParameterFloat>(
    "decay", "Decay",
    juce::NormalisableRange<float>(0.001f, 2.0f, 0.001f, 0.3f), 0.1f));

params.push_back(std::make_unique<juce::AudioParameterFloat>(
    "sustain", "Sustain",
    juce::NormalisableRange<float>(0.0f, 1.0f, 0.01f), 0.7f));

params.push_back(std::make_unique<juce::AudioParameterFloat>(
    "release", "Release",
    juce::NormalisableRange<float>(0.001f, 5.0f, 0.001f, 0.3f), 0.3f));

params.push_back(std::make_unique<juce::AudioParameterFloat>(
    "master_gain", "Master Gain",
    juce::NormalisableRange<float>(-60.0f, 12.0f, 0.1f), 0.0f));

return { params.begin(), params.end() };
```

}

void PluginProcessor::prepareToPlay(double sampleRate, int samplesPerBlock)
{
// Initialize your Faust DSP here
// faustDSP.init(sampleRate);
}

void PluginProcessor::releaseResources() {}

void PluginProcessor::processBlock(juce::AudioBuffer<float>& buffer, juce::MidiBuffer& midiMessages)
{
juce::ScopedNoDenormals noDenormals;

```
// Clear output if no input
for (auto i = getTotalNumInputChannels(); i < getTotalNumOutputChannels(); ++i)
    buffer.clear(i, 0, buffer.getNumSamples());

// Process your Faust DSP here
// faustDSP.compute(buffer.getNumSamples(), inputs, outputs);
```

}

juce::AudioProcessorEditor* PluginProcessor::createEditor()
{
return new PluginEditor(*this);
}

void PluginProcessor::getStateInformation(juce::MemoryBlock& destData)
{
auto state = apvts.copyState();
std::unique_ptr<juce::XmlElement> xml(state.createXml());
copyXmlToBinary(*xml, destData);
}

void PluginProcessor::setStateInformation(const void* data, int sizeInBytes)
{
std::unique_ptr<juce::XmlElement> xml(getXmlFromBinary(data, sizeInBytes));
if (xml && xml->hasTagName(apvts.state.getType()))
apvts.replaceState(juce::ValueTree::fromXml(*xml));
}

juce::AudioProcessor* JUCE_CALLTYPE createPluginFilter()
{
return new PluginProcessor();
}
PROCCPPEOF

# PluginEditor.h

cat > Source/PluginEditor.h << ‘EDITORHEADEREOF’
#pragma once
#include <JuceHeader.h>
#include “PluginProcessor.h”
#include “BinaryData.h”

class PluginEditor : public juce::AudioProcessorEditor,
private juce::Timer
{
public:
explicit PluginEditor(PluginProcessor&);
~PluginEditor() override;

```
void paint(juce::Graphics&) override {}
void resized() override;
```

private:
void timerCallback() override;

```
std::optional<juce::WebBrowserComponent::Resource> getResource(const juce::String& url);

void handleSetParameter(const juce::Array<juce::var>& args,
                       juce::WebBrowserComponent::NativeFunctionCompletion completion);
void handleGetParameter(const juce::Array<juce::var>& args,
                       juce::WebBrowserComponent::NativeFunctionCompletion completion);
void handleGetAllParameters(const juce::Array<juce::var>& args,
                            juce::WebBrowserComponent::NativeFunctionCompletion completion);

void syncParametersToUI();

PluginProcessor& processor;
juce::WebBrowserComponent webView;

JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR(PluginEditor)
```

};
EDITORHEADEREOF

# PluginEditor.cpp

cat > Source/PluginEditor.cpp << ‘EDITORCPPEOF’
#include “PluginEditor.h”

PluginEditor::PluginEditor(PluginProcessor& p)
: AudioProcessorEditor(&p),
processor(p),
webView(
juce::WebBrowserComponent::Options{}
// Use WebView2 on Windows (not IE!)
.withBackend(juce::WebBrowserComponent::Options::Backend::webview2)

```
          // WebView2 configuration
          .withWinWebView2Options(
              juce::WebBrowserComponent::Options::WinWebView2{}
                  .withUserDataFolder(
                      juce::File::getSpecialLocation(juce::File::tempDirectory)
                          .getChildFile(JucePlugin_Name "_WebView2")
                  )
                  .withStatusBarDisabled()
          )
          
          // C++ functions callable from JavaScript
          .withNativeFunction("setParameter",
              [this](auto& args, auto completion) { handleSetParameter(args, std::move(completion)); })
          .withNativeFunction("getParameter",
              [this](auto& args, auto completion) { handleGetParameter(args, std::move(completion)); })
          .withNativeFunction("getAllParameters",
              [this](auto& args, auto completion) { handleGetAllParameters(args, std::move(completion)); })
          
          // Serve local resources
          .withResourceProvider(
              [this](const juce::String& url) { return getResource(url); },
              juce::URL("https://plugin.local")
          )
  )
```

{
setSize(800, 600);
addAndMakeVisible(webView);
webView.goToURL(“https://plugin.local/faceplate.html”);
startTimerHz(30);
}

PluginEditor::~PluginEditor()
{
stopTimer();
}

void PluginEditor::resized()
{
webView.setBounds(getLocalBounds());
}

void PluginEditor::timerCallback()
{
syncParametersToUI();
}

std::optional<juce::WebBrowserComponent::Resource> PluginEditor::getResource(const juce::String& url)
{
juce::URL parsed(url);
auto path = parsed.getSubPath();
if (path.startsWith(”/”)) path = path.substring(1);

```
struct ResourceInfo { const char* name; const char* data; int size; const char* mime; };
const ResourceInfo resources[] = {
    { "faceplate.html", BinaryData::faceplate_html, BinaryData::faceplate_htmlSize, "text/html" },
    { "style.css", BinaryData::style_css, BinaryData::style_cssSize, "text/css" },
    { "app.js", BinaryData::app_js, BinaryData::app_jsSize, "application/javascript" },
};

for (const auto& r : resources) {
    if (path == r.name) {
        return juce::WebBrowserComponent::Resource {
            std::vector<std::byte>(reinterpret_cast<const std::byte*>(r.data),
                                   reinterpret_cast<const std::byte*>(r.data) + r.size),
            r.mime
        };
    }
}
return std::nullopt;
```

}

void PluginEditor::handleSetParameter(const juce::Array<juce::var>& args,
juce::WebBrowserComponent::NativeFunctionCompletion completion)
{
if (args.size() >= 2) {
auto id = args[0].toString();
auto value = static_cast<float>(args[1]);
if (auto* param = processor.getAPVTS().getParameter(id)) {
param->setValueNotifyingHost(param->convertTo0to1(value));
completion(juce::var(true));
return;
}
}
completion(juce::var(false));
}

void PluginEditor::handleGetParameter(const juce::Array<juce::var>& args,
juce::WebBrowserComponent::NativeFunctionCompletion completion)
{
if (args.size() >= 1) {
auto id = args[0].toString();
if (auto* param = processor.getAPVTS().getParameter(id)) {
completion(juce::var(param->getValue()));
return;
}
}
completion(juce::var());
}

void PluginEditor::handleGetAllParameters(const juce::Array<juce::var>& args,
juce::WebBrowserComponent::NativeFunctionCompletion completion)
{
juce::DynamicObject::Ptr obj = new juce::DynamicObject();
for (auto* param : processor.getParameters()) {
if (auto* p = dynamic_cast<juce::AudioProcessorParameterWithID*>(param))
obj->setProperty(p->getParameterID(), param->getValue());
}
completion(juce::var(obj.get()));
}

void PluginEditor::syncParametersToUI()
{
juce::String js = “if(window.updateParams){window.updateParams({”;
bool first = true;
for (auto* param : processor.getParameters()) {
if (auto* p = dynamic_cast<juce::AudioProcessorParameterWithID*>(param)) {
if (!first) js += “,”;
js += “’” + p->getParameterID() + “’:” + juce::String(param->getValue());
first = false;
}
}
js += “});}”;
webView.evaluateJavascript(js, nullptr);
}
EDITORCPPEOF

echo -e “${GREEN}✓ Source files created${NC}”

#===============================================================================

# Step 5: Create Modern HTML Faceplate Resources

#===============================================================================
echo -e “${YELLOW}[5/5] Creating modern HTML faceplate…${NC}”

# faceplate.html

cat > Resources/faceplate.html << ‘HTMLEOF’

<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schoffhauzer FM Synth</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="synth-panel">
        <header class="panel-header">
            <h1>SCHOFFHAUZER</h1>
            <span class="model">FM SYNTHESIZER</span>
        </header>

```
    <section class="control-section oscillator-section">
        <h2>OSCILLATOR</h2>
        <div class="knob-row">
            <div class="knob-group">
                <div class="knob" data-param="carrier_freq" data-min="20" data-max="2000" data-unit="Hz">
                    <div class="knob-visual">
                        <div class="knob-indicator"></div>
                    </div>
                </div>
                <label>CARRIER</label>
                <span class="value-display" id="carrier_freq_display">440 Hz</span>
            </div>
            
            <div class="knob-group">
                <div class="knob" data-param="mod_index" data-min="0" data-max="20" data-unit="">
                    <div class="knob-visual">
                        <div class="knob-indicator"></div>
                    </div>
                </div>
                <label>MOD INDEX</label>
                <span class="value-display" id="mod_index_display">1.00</span>
            </div>
            
            <div class="knob-group">
                <div class="knob" data-param="mod_ratio" data-min="0.1" data-max="10" data-unit=":1">
                    <div class="knob-visual">
                        <div class="knob-indicator"></div>
                    </div>
                </div>
                <label>MOD RATIO</label>
                <span class="value-display" id="mod_ratio_display">1.00:1</span>
            </div>
        </div>
    </section>
    
    <section class="control-section envelope-section">
        <h2>ENVELOPE</h2>
        <div class="knob-row">
            <div class="knob-group">
                <div class="knob small" data-param="attack" data-min="0.001" data-max="2" data-unit="s">
                    <div class="knob-visual"><div class="knob-indicator"></div></div>
                </div>
                <label>A</label>
                <span class="value-display" id="attack_display">10ms</span>
            </div>
            
            <div class="knob-group">
                <div class="knob small" data-param="decay" data-min="0.001" data-max="2" data-unit="s">
                    <div class="knob-visual"><div class="knob-indicator"></div></div>
                </div>
                <label>D</label>
                <span class="value-display" id="decay_display">100ms</span>
            </div>
            
            <div class="knob-group">
                <div class="knob small" data-param="sustain" data-min="0" data-max="1" data-unit="">
                    <div class="knob-visual"><div class="knob-indicator"></div></div>
                </div>
                <label>S</label>
                <span class="value-display" id="sustain_display">70%</span>
            </div>
            
            <div class="knob-group">
                <div class="knob small" data-param="release" data-min="0.001" data-max="5" data-unit="s">
                    <div class="knob-visual"><div class="knob-indicator"></div></div>
                </div>
                <label>R</label>
                <span class="value-display" id="release_display">300ms</span>
            </div>
        </div>
    </section>
    
    <section class="control-section output-section">
        <h2>OUTPUT</h2>
        <div class="knob-row">
            <div class="knob-group">
                <div class="knob large" data-param="master_gain" data-min="-60" data-max="12" data-unit="dB">
                    <div class="knob-visual"><div class="knob-indicator"></div></div>
                </div>
                <label>MASTER</label>
                <span class="value-display" id="master_gain_display">0.0 dB</span>
            </div>
        </div>
    </section>
    
    <footer class="panel-footer">
        <span class="brand">9LIVEZZZ</span>
        <span class="version">v1.0</span>
    </footer>
</div>

<script type="module" src="app.js"></script>
```

</body>
</html>
HTMLEOF

# style.css - Modern CSS

cat > Resources/style.css << ‘CSSEOF’
/* Schoffhauzer FM Synth - Modern CSS Faceplate */

:root {
/* Color palette - Industrial/Brutalist */
–bg-dark: #1a1a1a;
–bg-panel: #2d2d2d;
–bg-section: #252525;
–accent-primary: #ff6b35;
–accent-secondary: #00d4aa;
–text-primary: #e8e8e8;
–text-secondary: #888;
–text-dim: #555;
–border-color: #444;
–knob-bg: linear-gradient(145deg, #333, #1a1a1a);
–knob-shadow:
4px 4px 8px #111,
-2px -2px 6px #444;

```
/* Dimensions */
--knob-size: 70px;
--knob-size-small: 55px;
--knob-size-large: 90px;
```

}

- {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  }

body {
font-family: ‘Segoe UI’, ‘Inter’, -apple-system, sans-serif;
background: var(–bg-dark);
color: var(–text-primary);
min-height: 100vh;
display: flex;
justify-content: center;
align-items: center;
overflow: hidden;
user-select: none;
}

.synth-panel {
background: var(–bg-panel);
border-radius: 12px;
padding: 24px;
box-shadow:
0 20px 60px rgba(0,0,0,0.5),
inset 0 1px 0 rgba(255,255,255,0.05);
border: 1px solid var(–border-color);
min-width: 700px;
}

/* Header */
.panel-header {
text-align: center;
margin-bottom: 24px;
padding-bottom: 16px;
border-bottom: 1px solid var(–border-color);
}

.panel-header h1 {
font-size: 28px;
font-weight: 700;
letter-spacing: 8px;
color: var(–accent-primary);
text-shadow: 0 0 20px rgba(255, 107, 53, 0.3);
}

.panel-header .model {
font-size: 11px;
letter-spacing: 4px;
color: var(–text-secondary);
display: block;
margin-top: 4px;
}

/* Control Sections */
.control-section {
background: var(–bg-section);
border-radius: 8px;
padding: 16px;
margin-bottom: 16px;
}

.control-section h2 {
font-size: 10px;
font-weight: 600;
letter-spacing: 3px;
color: var(–text-secondary);
margin-bottom: 16px;
padding-left: 4px;
}

.knob-row {
display: flex;
justify-content: center;
gap: 32px;
flex-wrap: wrap;
}

/* Knob Groups */
.knob-group {
display: flex;
flex-direction: column;
align-items: center;
gap: 8px;
}

.knob-group label {
font-size: 9px;
font-weight: 600;
letter-spacing: 2px;
color: var(–text-secondary);
}

.value-display {
font-size: 11px;
font-family: ‘JetBrains Mono’, ‘Consolas’, monospace;
color: var(–accent-secondary);
min-width: 70px;
text-align: center;
}

/* Knob Visuals */
.knob {
width: var(–knob-size);
height: var(–knob-size);
cursor: grab;
}

.knob.small {
width: var(–knob-size-small);
height: var(–knob-size-small);
}

.knob.large {
width: var(–knob-size-large);
height: var(–knob-size-large);
}

.knob-visual {
width: 100%;
height: 100%;
border-radius: 50%;
background: var(–knob-bg);
box-shadow: var(–knob-shadow);
position: relative;
transition: transform 0.05s ease-out;
}

.knob:active .knob-visual {
cursor: grabbing;
}

.knob-indicator {
position: absolute;
width: 4px;
height: 35%;
background: var(–accent-primary);
border-radius: 2px;
top: 10%;
left: 50%;
transform: translateX(-50%);
box-shadow: 0 0 8px var(–accent-primary);
}

/* Footer */
.panel-footer {
display: flex;
justify-content: space-between;
padding-top: 16px;
border-top: 1px solid var(–border-color);
margin-top: 8px;
}

.panel-footer .brand {
font-size: 10px;
letter-spacing: 3px;
color: var(–text-dim);
}

.panel-footer .version {
font-size: 10px;
color: var(–text-dim);
}

/* Animations */
@keyframes glow {
0%, 100% { box-shadow: 0 0 5px var(–accent-primary); }
50% { box-shadow: 0 0 15px var(–accent-primary); }
}

.knob:hover .knob-indicator {
animation: glow 1.5s ease-in-out infinite;
}
CSSEOF

# app.js - Modern ES6+ JavaScript

cat > Resources/app.js << ‘JSEOF’
/**

- Schoffhauzer FM Synth - Modern JavaScript UI Controller
- Uses JUCE 8 WebBrowserComponent native integration
  */

class SynthUI {
constructor() {
this.params = {};
this.knobs = new Map();
this.activeKnob = null;
this.startY = 0;
this.startValue = 0;

```
    this.init();
}

async init() {
    // Check for JUCE backend
    if (typeof __JUCE__ === 'undefined') {
        console.log('Running in standalone/browser mode - no JUCE backend');
        this.mockMode = true;
    }
    
    // Get initial parameter values
    await this.loadParameters();
    
    // Setup knob interactions
    this.setupKnobs();
    
    // Setup global mouse handlers for dragging
    document.addEventListener('mousemove', (e) => this.onMouseMove(e));
    document.addEventListener('mouseup', () => this.onMouseUp());
    document.addEventListener('mouseleave', () => this.onMouseUp());
    
    console.log('Schoffhauzer UI initialized');
}

async loadParameters() {
    if (this.mockMode) {
        // Default values for testing without JUCE
        this.params = {
            carrier_freq: 0.21,  // ~440Hz normalized
            mod_index: 0.05,
            mod_ratio: 0.09,
            attack: 0.005,
            decay: 0.05,
            sustain: 0.7,
            release: 0.06,
            master_gain: 0.5
        };
    } else {
        try {
            const getAllParams = __JUCE__.backend.getNativeFunction('getAllParameters');
            this.params = await getAllParams();
        } catch (e) {
            console.error('Failed to load parameters:', e);
        }
    }
    
    // Update all displays
    for (const [id, value] of Object.entries(this.params)) {
        this.updateKnobVisual(id, value);
        this.updateDisplay(id, value);
    }
}

setupKnobs() {
    document.querySelectorAll('.knob').forEach(knobEl => {
        const paramId = knobEl.dataset.param;
        const min = parseFloat(knobEl.dataset.min) || 0;
        const max = parseFloat(knobEl.dataset.max) || 1;
        const unit = knobEl.dataset.unit || '';
        
        this.knobs.set(paramId, { element: knobEl, min, max, unit });
        
        // Initial visual state
        if (this.params[paramId] !== undefined) {
            this.updateKnobVisual(paramId, this.params[paramId]);
        }
        
        // Mouse down handler
        knobEl.addEventListener('mousedown', (e) => {
            e.preventDefault();
            this.activeKnob = paramId;
            this.startY = e.clientY;
            this.startValue = this.params[paramId] || 0;
            knobEl.classList.add('active');
        });
        
        // Double-click to reset
        knobEl.addEventListener('dblclick', () => {
            this.setParameter(paramId, 0.5); // Reset to center
        });
    });
}

onMouseMove(e) {
    if (!this.activeKnob) return;
    
    const deltaY = this.startY - e.clientY;
    const sensitivity = e.shiftKey ? 0.001 : 0.005; // Fine control with Shift
    
    let newValue = this.startValue + (deltaY * sensitivity);
    newValue = Math.max(0, Math.min(1, newValue)); // Clamp 0-1
    
    this.setParameter(this.activeKnob, newValue);
}

onMouseUp() {
    if (this.activeKnob) {
        const knob = this.knobs.get(this.activeKnob);
        if (knob) knob.element.classList.remove('active');
        this.activeKnob = null;
    }
}

async setParameter(id, normalizedValue) {
    this.params[id] = normalizedValue;
    this.updateKnobVisual(id, normalizedValue);
    this.updateDisplay(id, normalizedValue);
    
    // Send to C++ backend
    if (!this.mockMode) {
        try {
            const setParam = __JUCE__.backend.getNativeFunction('setParameter');
            await setParam(id, normalizedValue);
        } catch (e) {
            console.error('Failed to set parameter:', e);
        }
    }
}

updateKnobVisual(id, normalizedValue) {
    const knob = this.knobs.get(id);
    if (!knob) return;
    
    const visual = knob.element.querySelector('.knob-visual');
    if (visual) {
        // Rotate from -135° to +135° (270° range)
        const rotation = -135 + (normalizedValue * 270);
        visual.style.transform = `rotate(${rotation}deg)`;
    }
}

updateDisplay(id, normalizedValue) {
    const display = document.getElementById(`${id}_display`);
    if (!display) return;
    
    const knob = this.knobs.get(id);
    if (!knob) return;
    
    const { min, max, unit } = knob;
    const realValue = min + (normalizedValue * (max - min));
    
    // Format based on parameter type
    let formatted;
    switch (id) {
        case 'carrier_freq':
            formatted = `${Math.round(realValue)} Hz`;
            break;
        case 'mod_index':
        case 'mod_ratio':
            formatted = realValue.toFixed(2) + unit;
            break;
        case 'attack':
        case 'decay':
        case 'release':
            formatted = realValue < 1 
                ? `${Math.round(realValue * 1000)}ms` 
                : `${realValue.toFixed(2)}s`;
            break;
        case 'sustain':
            formatted = `${Math.round(realValue * 100)}%`;
            break;
        case 'master_gain':
            formatted = `${realValue.toFixed(1)} dB`;
            break;
        default:
            formatted = realValue.toFixed(2) + unit;
    }
    
    display.textContent = formatted;
}
```

}

// Called from C++ to sync parameter changes (automation, presets, etc.)
window.updateParams = function(params) {
if (!window.synthUI) return;

```
for (const [id, value] of Object.entries(params)) {
    // Only update if value changed significantly
    if (Math.abs((window.synthUI.params[id] || 0) - value) > 0.0001) {
        window.synthUI.params[id] = value;
        window.synthUI.updateKnobVisual(id, value);
        window.synthUI.updateDisplay(id, value);
    }
}
```

};

// Initialize on load
window.synthUI = new SynthUI();
JSEOF

echo -e “${GREEN}✓ Modern HTML faceplate created${NC}”

#===============================================================================

# Done!

#===============================================================================
echo “”
echo -e “${GREEN}================================================${NC}”
echo -e “${GREEN}Setup Complete!${NC}”
echo -e “${GREEN}================================================${NC}”
echo “”
echo -e “Project created at: ${BLUE}${PROJECT_PATH}${NC}”
echo “”
echo -e “Next steps:”
echo -e “  1. cd ${PROJECT_PATH}”
echo -e “  2. mkdir build && cd build”
echo -e “  3. cmake .. -DCMAKE_BUILD_TYPE=Release”
echo -e “  4. cmake –build . –config Release”
echo “”
echo -e “To integrate your Faust DSP:”
echo -e “  1. Compile your .dsp files with faust2* or faust -a minimal.cpp”
echo -e “  2. Include the generated headers in PluginProcessor”
echo -e “  3. Add your Faust parameters to createParameterLayout()”
echo “”
echo -e “${YELLOW}Important:${NC} Users on Windows need WebView2 Runtime installed.”
echo -e “It auto-installs with Microsoft Edge, or download from:”
echo -e “${BLUE}https://go.microsoft.com/fwlink/p/?LinkId=2124703${NC}”
echo “”